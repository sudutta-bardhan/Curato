<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Search Looks - Curato</title>
  <link rel="stylesheet" href="assets/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
</head>
<body>
  <header>
    <nav class="navbar">
      <div class="logo">Curato</div>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About Us</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="search.html" class="active">Search</a></li>
      </ul>
      <button id="personalizeBtn" class="btn-primary">Personalize</button>
    </nav>
  </header>

  <main class="section" style="max-width: 1000px; margin: 2rem auto;">
    <h1 class="search-title">Search Fashion Looks</h1>
    <form id="searchForm" style="margin-bottom: 1.5rem;">
      <input type="text" id="queryInput" placeholder="Search fashion items, e.g. wide legged jeans" required />
      <button type="submit" class="btn-primary">Search</button>
    </form>
    <div id="resultsGallery" class="gallery"></div>
  </main>

  <footer>
    <p>&copy; 2025 Curato. All rights reserved.</p>
  </footer>

  <div id="personalizeModal" class="modal hidden">
    <div class="modal-content">
      <h2>Personalize Your Style</h2>
      <form id="personalizeForm">
        <label for="height">Height (cm):</label>
        <input type="number" id="height" name="height" min="100" max="220" required />
        <label for="bodyType">Body Type:</label>
        <select id="bodyType" name="bodyType" required>
          <option value="" disabled selected>Select</option>
          <option value="slim">Slim</option>
          <option value="athletic">Athletic</option>
          <option value="curvy">Curvy</option>
          <option value="plus-size">Plus Size</option>
          <option value="average">Average</option>
        </select>
        <label for="stylePref">Style Preference:</label>
        <select id="stylePref" name="stylePref" required>
          <option value="" disabled selected>Select</option>
          <option value="casual">Casual</option>
          <option value="office">Office</option>
          <option value="party">Party</option>
          <option value="streetwear">Streetwear</option>
        </select>
        <button type="submit" class="btn-primary">Save Preferences</button>
        <button type="button" id="closeModal" class="btn-secondary">Cancel</button>
      </form>
    </div>
  </div>

<script src="assets/script.js"></script>
<script>
  const API_KEY = 'AIzaSyC1iPQUbEx75mXv8Va_U2dzLDoXetQAvDI';
  const CX = '902d28d8f0f6647e0';

  const form = document.getElementById('searchForm');
  const resultsGallery = document.getElementById('resultsGallery');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const query = document.getElementById('queryInput').value.trim();
    if (!query) return;
    resultsGallery.innerHTML = '<p>Loading...</p>';

    try {
      const response = await fetch(`https://www.googleapis.com/customsearch/v1?key=${API_KEY}&cx=${CX}&q=${encodeURIComponent(query)}&searchType=image&num=10`);
      const data = await response.json();

      if (!data.items || data.items.length === 0) {
        resultsGallery.innerHTML = '<p>No results found.</p>';
        return;
      }

      resultsGallery.innerHTML = '';
      data.items.forEach(item => {
        const card = document.createElement('div');
        card.className = 'outfit-card';
        card.innerHTML = `
          <img src="${item.link}" alt="${item.title}" />
          <div class="card-content">
            <h3>${item.title}</h3>
            <a href="${item.image.contextLink}" target="_blank" rel="noopener noreferrer" class="btn-secondary">View Source</a>
          </div>
        `;
        resultsGallery.appendChild(card);
      });
    } catch (error) {
      console.error('Search error:', error);
      resultsGallery.innerHTML = '<p>Error fetching results. Try again later.</p>';
    }
  });
</script>
</body>
</html>